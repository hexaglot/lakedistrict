!function(e){function t(t){for(var n,o,r=t[0],l=t[1],u=t[2],d=0,p=[];d<r.length;d++)o=r[d],i[o]&&p.push(i[o][0]),i[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(c&&c(t);p.length;)p.shift()();return a.push.apply(a,u||[]),s()}function s(){for(var e,t=0;t<a.length;t++){for(var s=a[t],n=!0,r=1;r<s.length;r++){var l=s[r];0!==i[l]&&(n=!1)}n&&(a.splice(t--,1),e=o(o.s=s[0]))}return e}var n={},i={1:0},a=[];function o(t){if(n[t])return n[t].exports;var s=n[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=n,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:s})},o.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var r=window.webpackJsonp=window.webpackJsonp||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var u=0;u<r.length;u++)t(r[u]);var c=l;a.push([6,0]),s()}([,function(e,t){e.exports={"huge-txt":"S97P_JUmwICgzvKNgwpL5",hugeTxt:"S97P_JUmwICgzvKNgwpL5","large-txt":"_2ImHpEJQXBUVZ-wHTS3tlI",largeTxt:"_2ImHpEJQXBUVZ-wHTS3tlI","medium-txt":"_2rav2yA0hruMgygvWaSY8Y",mediumTxt:"_2rav2yA0hruMgygvWaSY8Y","small-txt":"_3Em3d713zg3w0W14-RSAt8",smallTxt:"_3Em3d713zg3w0W14-RSAt8",button:"_2c6HPOm3T_AZF3xaoDYAgr","hamburger-icon":"_1U-DodgPqJO1AAsCAh67x-",hamburgerIcon:"_1U-DodgPqJO1AAsCAh67x-","cross-icon":"_1x6f5KogiJzpXxXNXCyutS",crossIcon:"_1x6f5KogiJzpXxXNXCyutS",container:"VQyiSrbr3-ilvEUq8rbH9",open:"Ah4qJWPTUnK4EbFH-KlHr",inner:"_3czg6AZpeI6zlU9RSgu2Do",nav:"_7vw_6CMITt9JIO-FovhSk","close-Button":"_2slGjltu2tCA5OUpws0K-S",closeButton:"_2slGjltu2tCA5OUpws0K-S",title:"_3d3gMDsGY7oBRMtbKMk34E",website:"_3STpmYvbJkH5N7ODzYg5qi",phone:"_209xnDwfkA2Dq9zEysrDMf",address:"_3bi0FfaG6uVUAgbZerZmIJ",fs_tips:"_1GH-DYX8kG1U4xPQUxFpWh",fsTips:"_1GH-DYX8kG1U4xPQUxFpWh",tipsTitle:"_1SGlEa2Apcgu1I2sSIiXo",tips:"_3pMz9Qy7fW5joHRfUnKBvi",tip:"_35oNFjTF-e0DhlytxnISzN",tipsName:"_2ommyU67-BHtjZxy6oCGkF",tipsQuote:"_3neFoBq3iGK-MmCQlZzEOu","photo-container":"_2wxqIhTA67WJBODuDyl7N_",photoContainer:"_2wxqIhTA67WJBODuDyl7N_",photo:"_26TKAE_tXVSa0xXeSCtr1c","photo-failed":"_1P6WM-ulcnzmfJPMiOVaOg",photoFailed:"_1P6WM-ulcnzmfJPMiOVaOg"}},function(e,t){e.exports={"huge-txt":"_25TunprmsRVXNOsCatqL2Q",hugeTxt:"_25TunprmsRVXNOsCatqL2Q","large-txt":"_3lFcOLzE7w05OO8erfGhxA",largeTxt:"_3lFcOLzE7w05OO8erfGhxA","medium-txt":"_1zVpWiKZRFzSMNTSodT-Vr",mediumTxt:"_1zVpWiKZRFzSMNTSodT-Vr","small-txt":"_3EHa0kLP3WtG7u5pU6qWkI",smallTxt:"_3EHa0kLP3WtG7u5pU6qWkI",button:"gBBtYu2QBtvmo_oiB_pCe","hamburger-icon":"_3pE94TI9zBPjTRjt97Pnmc",hamburgerIcon:"_3pE94TI9zBPjTRjt97Pnmc","cross-icon":"_3t3pqtHF1H-yUzOtgwYQVv",crossIcon:"_3t3pqtHF1H-yUzOtgwYQVv","app-container":"_3Zu_wIPat6fjk8RiHFzw8U",appContainer:"_3Zu_wIPat6fjk8RiHFzw8U",nav:"_3fLFuY4am6eV5QnjQDazBc",title:"_3FyAyhvs0ytHp56oxo6ucA","menu-button":"usYlg_dTnUwfWL82W3bjD",menuButton:"usYlg_dTnUwfWL82W3bjD",open:"_2WlinzaikPskxgGsPmKb9A","inner-window":"_38HOZO94joC8-nsoBnSaml",innerWindow:"_38HOZO94joC8-nsoBnSaml","map-container":"_15gOiwejs3zE0Z6BVGKl6G",mapContainer:"_15gOiwejs3zE0Z6BVGKl6G","list-container":"uvfb13oGcTBF8EFk97EKw",listContainer:"uvfb13oGcTBF8EFk97EKw",loadingFailed:"_1Aq4REJLlD2KmKMecrUqIj"}},,function(e,t){e.exports={container:"_38FIfACuTADSvTGnJD0Ce5",input:"Puen4DnQWZjD4-IXugyRn",list:"k89Yug4IAKeRAqOflfdfM",item:"f3jYssxtL5w2Sn3QgoVgO",selected:"_2Sc7nuh3GbLecHTOvexNQj","none-match":"_3QWSUkkDSZr1KooI5_XPif",noneMatch:"_3QWSUkkDSZr1KooI5_XPif"}},function(e,t){e.exports={"huge-txt":"_1Qslz_aVDJPLYG2GehLdr6",hugeTxt:"_1Qslz_aVDJPLYG2GehLdr6","large-txt":"_3ubjB-OheQxCmLJ6wKxMeA",largeTxt:"_3ubjB-OheQxCmLJ6wKxMeA","medium-txt":"pS1xiuV-iHoNDCj5OK2w4",mediumTxt:"pS1xiuV-iHoNDCj5OK2w4","small-txt":"_3lK4CEm7VddOY-HdnMlU9T",smallTxt:"_3lK4CEm7VddOY-HdnMlU9T",button:"_2q9bx9Qocn2Eskd98Bk9he","hamburger-icon":"_1LyH5pX2KehY6vHw6_xgy-",hamburgerIcon:"_1LyH5pX2KehY6vHw6_xgy-","cross-icon":"_2PYWAvdmFXoic6XcSr8ZSN",crossIcon:"_2PYWAvdmFXoic6XcSr8ZSN",map:"_2unGnnUal123j3NV9xxgFi",container:"_1I_zfCZSrnS5p6OX5oOees",open:"_3vV_-NFV0TNk7tlfVuUWGx"}},function(e,t,s){"use strict";s.r(t);var n=s(0),i=s(2);const a="venues : venues,\n                    visibleVenues : visibleVenues,\n                    currentVenue : currentVenue,\n                    currentVenueMatching : currentVenueMatching,\n                    searchTerm : searchTerm,\n                    notVisibleVenues : notVisibleVenues",o=`\n\x3c!-- ko if: status() != 'failed' --\x3e\n<div class="${i.appContainer}">\n    <nav class="${i.nav}">\n        <span class="${i.title}">Wedding Venues</span>\n        <div type="button" data-bind="click: toggleMenu, css: {'${i.open}': menuOpen()}" class="${i.menuButton}"></div>\n    </nav>\n    <div class="${i.innerWindow}" data-bind="if: status() == 'loaded'">\n        <div class="${i.mapContainer}">\n            <map-widget params="${a}"></map-widget>\n        </div>\n        <div class="${i.listContainer}" data-bind="css: {'${i.open}': menuOpen()}">\n            <venue-list-widget params="${a}"></venue-list-widget>\n        </div>\n    </div>\n</div>\n\x3c!-- /ko --\x3e\n\x3c!-- ko if: status() === 'failed' --\x3e\n<div data-bind="if: status() === 'failed'" class="${i.loadingFailed}">\n    <p>Couldn't load the list of venues, please try again later.</p>\n</div>\n\x3c!-- /ko --\x3e\n`;n.components.register("app-widget",{template:o,viewModel:class{constructor(e){this.venues=e.venues,this.status=e.status,this.searchTerm=Object(n.observable)(),this.visibleVenues=Object(n.computed)(()=>{const e=new RegExp(this.searchTerm(),"i");return this.venues().filter(t=>e.test(t.name))}),this.notVisibleVenues=Object(n.computed)(()=>{const e=new RegExp(this.searchTerm(),"i");return this.venues().filter(t=>!e.test(t.name))}),this.currentVenue=Object(n.observable)(),this.menuOpen=Object(n.observable)(!1),this.currentVenueMatching=Object(n.computed)(()=>{if(this.currentVenue())for(const e of this.visibleVenues())if(e.name===this.currentVenue().name)return!0;return!1}),this.currentVenue.subscribe(e=>{e&&e.updateFoursquareDetails()})}toggleMenu(){this.menuOpen(!this.menuOpen())}}});var r=s(3);var l=s(5);const u={template:`\n<div class="${l.map}" id="map"></div>\n<overlay-widget id="overlay" class="${l.container}" data-bind="css: {'${l.open}': overlayVisible()}" params="venue : currentVenue, visible : overlayVisible"></overlay-widget>\n    `,viewModel:{createViewModel:(e,t)=>new class{constructor(e,t){this.venues=t.venues,this.visibleVenues=t.visibleVenues,this.currentVenue=t.currentVenue,this.currentVenueMatching=t.currentVenueMatching,this.overlayVisible=Object(n.observable)(!1),this.notVisibleVenues=t.notVisibleVenues,new Promise((e,t)=>{window.googleMapCallback=(()=>e());const s=r('<script async defer type="text/javascript"><\/script>');s.attr("src","https://maps.googleapis.com/maps/api/js?v=3&key=AIzaSyBdrDGYzK48wAwoDe7MwwKpGxGJZ6c2jqE&callback=googleMapCallback&libraries=places"),r("body").append(s)}).then(()=>{this.map=new google.maps.Map(e,Object.assign({fullscreenControl:!1,mapTypeControl:!1,mapTypeId:"terrain",streetViewControl:!0,streetViewControlOptions:{position:google.maps.ControlPosition.TOP_RIGHT},zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_TOP}},t.options)),document.getElementById("overlay"),this.map.data.setStyle({fillColor:"lightgray",strokeWeight:0}),this.markers={},this.venues=t.venues();for(const e of this.venues)this.addVenueMarker(e.name,e.location,e.href);this.currentVenueMatching.subscribe(e=>{e||(this.clearHighlights(),this.currentVenue(null))}),this.notVisibleVenues.subscribe(e=>{for(const t of e)this.markers[t.name].setAnimation(null),this.markers[t.name].setMap(null)}),this.visibleVenues.subscribe(e=>{if(e.length>0){for(const t of e){const e=this.markers[t.name];e.getMap()||e.setMap(this.map)}this.map.fitBounds(this.calculate_bounds())}else this.map.setCenter(new google.maps.LatLng(54.448906,-3.088366)),this.map.setZoom(8)}),this.currentVenue.subscribe(e=>{e?(this.map.setCenter(e.location),this.clearHighlights(),this.markers[e.name].setMap(this.map),this.markers[e.name].setAnimation(google.maps.Animation.BOUNCE),e.updateGoogleDetails(this.map),this.overlayVisible(!0)):(this.clearHighlights(),this.overlayVisible(!1))})})}addVenueMarker(e,t,s){const n=new google.maps.Marker({animation:google.maps.Animation.DROP,map:this.map,position:t,title:e});return n.addListener("click",()=>{for(const t of this.venues)t.name===e&&this.currentVenue(t)}),this.markers[e]=n,this.map.fitBounds(this.calculate_bounds()),n}clearHighlights(){for(const e in this.markers)this.markers[e]&&this.markers[e].setAnimation(null)}calculate_bounds(){const e=new google.maps.LatLngBounds;for(const t in this.markers)this.markers[t].getMap()&&e.extend(this.markers[t].getPosition());return e}}(r(t.element).find("#map").get(0),e)}};n.components.register("map-widget",u);var c=s(1);n.components.register("overlay-widget",{template:`\n    <div class="${c.container}" data-bind="css: {'${c.open}': visible()}, with: venue">\n        <div class="${c.inner}">\n            <div class="${c.nav}">\n                <span class="${c.title}" data-bind="text: name"></span>\n                <div class="${c.closeButton}" data-bind="click: $parent.toggleVisible()"></div>\n            </div>\n        </div>\n\n        \x3c!-- ko if: go.status() !== 'failed'--\x3e\n        <div class="${c.photoContainer}" data-bind="with: go.result">\n            <div class="${c.photo}" data-bind="style: { 'backgroundImage' : $data.photos ? 'url('+ $data.photos[0].getUrl({ 'maxWidth': 400, 'maxHeight': 196 }) +')': '0'}"> </div>\n        </div>\n        \x3c!-- /ko --\x3e\n        \x3c!-- ko if: go.status() === 'failed'--\x3e\n        <div class="${c.photoFailed}"> Photo not available.</div>\n        \x3c!-- /ko --\x3e\n\n        <div class="${c.inner}">\n            <div class="${c.website}"><a data-bind="attr: {href: href}"><span data-bind="text: name"></span></a></div>\n            <div class="${c.phone}" data-bind="text: phone"></div>\n            <div class="${c.address}" data-bind="text: address"></div>\n\n            \x3c!-- ko if: fs.status() === 'failed'--\x3e\n                <span>Foursquare unavailable.</span>\n            \x3c!-- /ko --\x3e\n            \x3c!-- ko if: fs.status() === 'loaded' && fs.result().response--\x3e\n            <div data-bind="with: fs.result">\n                <div data-bind="with: response.venue">\n                \x3c!-- ko if: tips.count > 0 --\x3e\n                    <div class="${c.fs_tips}">\n                        <div class="${c.tipsTitle}"><a data-bind="attr: {href : canonicalUrl}">FourSquare Tips:</a></div>\n\n                        <ul class="${c.tips}" data-bind="foreach: tips.groups">\n                        \x3c!-- ko foreach: $data.items --\x3e\n                                <li class="${c.tip}">\n                                    <span class=${c.tipsQuote} data-bind="text: $data.text"></span>\n                                    <span class="${c.tipsName}" data-bind="text: $data.user.firstName + ' ' + $data.user.lastName"></span>\n                                </li>\n                            \x3c!-- /ko --\x3e\n                        </ul>\n                    </div>\n                \x3c!-- /ko --\x3e\n                </div>\n            </div>\n            \x3c!-- /ko --\x3e\n        </div>\n</div>\n`,viewModel:class{constructor(e){this.venue=e.venue,this.visible=e.visible}toggleVisible(){this.visible(!this.visible())}}});var d=s(4);n.components.register("venue-list-widget",{template:`\n<div class="${d.container}">\n    <div>\n        <input class="${d.input}" data-bind="textInput: searchTerm" type="text" placeholder="Search"></input>\n    </div>\n\n    \x3c!-- ko if: visibleVenues().length > 0 --\x3e\n    <ul class="${d.list}" data-bind="foreach: visibleVenues">\n        <li class="${d.item}" data-bind="text:name, click:$parent.setCurrentVenue, css: {'${d.selected}': $parent.currentVenue() === $data}"></li>\n    </ul>\n    \x3c!-- /ko --\x3e\n    \x3c!-- ko if: !visibleVenues().length --\x3e\n        <div class="${d.noneMatch}">No Venues Match Filter</div>\n    \x3c!-- /ko --\x3e\n</div>`,viewModel:class{constructor(e){this.setCurrentVenue=(e=>{this.currentVenue(e)}),this.currentVenue=e.currentVenue,this.visibleVenues=e.visibleVenues,this.searchTerm=e.searchTerm}}});const p="XYQDCGDJQGGFXE1U0Y1BDOYDSLRFLRCWYLNSYM1EIJVKPZGO",h="HBZCOOVNKKFASCVIJUTB23ZYJZYEJDIPWXAIUVMUCZLDHMHT",m="20170801",v="https://api.foursquare.com/v2/";var g,b;(b=g||(g={})).loaded="loaded",b.loading="loading",b.failed="failed",b.unloaded="unloaded";class f{constructor(e){this.name=e.name,this.googleId=e.google_id,this.foursquareId=e.foursquare_id,this.address=e.address,this.phone=e.phone,this.href=e.href,this.go={status:Object(n.observable)(g.unloaded),result:Object(n.observable)()},this.fs={status:Object(n.observable)(g.unloaded),result:Object(n.observable)()},this.location=e.location}updateFoursquareDetails(){(this.foursquareId?function(e){const t=`${v}venues/${e}?client_id=${p}&client_secret=${h}&v=${m}`;return Promise.resolve(r.getJSON(t))}(this.foursquareId):Promise.resolve({})).then(e=>{this.fs.result(e),this.fs.status(g.loaded)}).catch(()=>{this.fs.status(g.failed)})}updateGoogleDetails(e){(function(e,t){const s=new google.maps.places.PlacesService(t);return new Promise((t,n)=>{s.getDetails({placeId:e},(e,s)=>{s===google.maps.places.PlacesServiceStatus.OK?t(e):n("No Google Maps! "+s.toString())})})})(this.googleId,e).then(e=>{this.go.result(e),this.go.status(g.loaded)}).catch(()=>{this.go.status(g.failed)})}}s(7);const x=new class{constructor(){this.venues=Object(n.observableArray)(),this.status=Object(n.observable)("unloaded")}loadFromJson(e){fetch(e).then(e=>e.json()).then(e=>new Promise(t=>{t(e)})).then(e=>{for(const t of e)this.venues.push(new f(t));this.status("loaded")}).catch(e=>{this.status("failed")})}};x.loadFromJson("data/wv.json"),Object(n.applyBindings)(x)},function(e,t){}]);
//# sourceMappingURL=app.bundle.js.map